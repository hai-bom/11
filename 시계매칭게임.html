<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë°˜ì§ë°˜ì§ ì‹œê³„ ê³µë¶€ (5ë¬¸ì œ)</title>
    <style>
        body { font-family: 'Nanum Gothic', sans-serif; background-color: #fff9c4; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        #game-container { background: white; padding: 30px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; border: 8px solid #ffcc80; width: 400px; }
        h1 { color: #f57c00; font-size: 24px; margin-bottom: 10px; }
        #progress { font-size: 18px; color: #795548; margin-bottom: 10px; font-weight: bold; }
        #clock-canvas { background: #fff; margin: 10px 0; border-radius: 50%; }
        .options-container { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        button { padding: 15px; font-size: 18px; cursor: pointer; background-color: #81c784; color: white; border: none; border-radius: 15px; box-shadow: 0 4px #66bb6a; transition: 0.1s; font-weight: bold; }
        button:active { box-shadow: 0 0 #66bb6a; transform: translateY(4px); }
        #message { height: 40px; margin-top: 15px; font-weight: bold; font-size: 1.1rem; color: #ff5722; }
        /* ê²°ê³¼ ì°½ ìŠ¤íƒ€ì¼ */
        #result-screen { display: none; }
        .restart-btn { background-color: #64b5f6; box-shadow: 0 4px #42a5f5; margin-top: 20px; width: 100%; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="question-screen">
        <h1>â° ëª‡ ì‹œì¼ê¹Œìš”?</h1>
        <div id="progress">ë¬¸ì œ: 1 / 5</div>
        <canvas id="clock-canvas" width="260" height="260"></canvas>
        <div id="message">ë°”ëŠ˜ì„ ì˜ ì‚´í´ë³´ì„¸ìš”!</div>
        <div class="options-container" id="options"></div>
    </div>

    <div id="result-screen">
        <h1>ğŸ‰ ìš°ì™€! ë‹¤ í’€ì—ˆì–´ìš”!</h1>
        <div id="final-score" style="font-size: 24px; margin: 20px 0;"></div>
        <p id="feedback-msg"></p>
        <button class="restart-btn" onclick="resetGame()">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>
</div>

<script>
    const canvas = document.getElementById('clock-canvas');
    const ctx = canvas.getContext('2d');
    const radius = canvas.width / 2;
    ctx.translate(radius, radius);
    const drawRadius = radius * 0.85;

    let currentQuestion = 1;
    let score = 0;
    const totalQuestions = 5;
    let correctAnswer = "";

    function startGame() {
        currentQuestion = 1;
        score = 0;
        document.getElementById('question-screen').style.display = 'block';
        document.getElementById('result-screen').style.display = 'none';
        generateQuestion();
    }

    function generateQuestion() {
        document.getElementById('progress').innerText = `ë¬¸ì œ: ${currentQuestion} / ${totalQuestions}`;
        document.getElementById('message').innerText = "ë°”ëŠ˜ì„ ì˜ ì‚´í´ë³´ì„¸ìš”!";
        document.getElementById('message').style.color = "#f57c00";

        // 2í•™ë…„ ìˆ˜ì¤€: ì •ê°, 30ë¶„, ê·¸ë¦¬ê³  5ë¶„ ë‹¨ìœ„ ì¼ë¶€ í¬í•¨
        const h = Math.floor(Math.random() * 12) + 1;
        const m = (Math.floor(Math.random() * 12) * 5); // 0, 5, 10... 55ë¶„
        
        correctAnswer = `${h}ì‹œ ${m === 0 ? 'ì •ê°' : m + 'ë¶„'}`;
        drawClock(h, m);
        createOptions(h, m);
    }

    function drawClock(h, m) {
        ctx.clearRect(-radius, -radius, canvas.width, canvas.height);
        
        // ì‹œê³„ í…Œë‘ë¦¬
        ctx.beginPath();
        ctx.arc(0, 0, drawRadius, 0, 2 * Math.PI);
        ctx.fillStyle = 'white';
        ctx.fill();
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 6;
        ctx.stroke();

        // ìˆ«ì (1~12)
        ctx.font = "bold 20px Arial";
        ctx.textBaseline = "middle";
        ctx.textAlign = "center";
        ctx.fillStyle = "#333";
        for (let num = 1; num <= 12; num++) {
            let ang = num * Math.PI / 6;
            ctx.rotate(ang);
            ctx.translate(0, -drawRadius * 0.8);
            ctx.rotate(-ang);
            ctx.fillText(num.toString(), 0, 0);
            ctx.rotate(ang);
            ctx.translate(0, drawRadius * 0.8);
            ctx.rotate(-ang);
        }

        // ì‹œì¹¨ (ì§§ì€ ë°”ëŠ˜)
        let hourPos = (h % 12) * Math.PI / 6 + (m * Math.PI / (6 * 60));
        drawHand(hourPos, drawRadius * 0.5, 8, "#333");

        // ë¶„ì¹¨ (ê¸´ ë°”ëŠ˜)
        let minutePos = m * Math.PI / 30;
        drawHand(minutePos, drawRadius * 0.75, 5, "#ff5722");

        // ì¤‘ì‹¬ì 
        ctx.beginPath();
        ctx.arc(0, 0, 8, 0, 2 * Math.PI);
        ctx.fillStyle = '#333';
        ctx.fill();
    }

    function drawHand(pos, length, width, color) {
        ctx.save();
        ctx.beginPath();
        ctx.lineWidth = width;
        ctx.lineCap = "round";
        ctx.strokeStyle = color;
        ctx.moveTo(0, 0);
        ctx.rotate(pos);
        ctx.lineTo(0, -length);
        ctx.stroke();
        ctx.restore();
    }

    function createOptions(h, m) {
        const container = document.getElementById('options');
        container.innerHTML = '';
        let options = [correctAnswer];

        while(options.length < 4) {
            let rh = Math.floor(Math.random() * 12) + 1;
            let rm = (Math.floor(Math.random() * 12) * 5);
            let opt = `${rh}ì‹œ ${rm === 0 ? 'ì •ê°' : rm + 'ë¶„'}`;
            if (!options.includes(opt)) options.push(opt);
        }
        options.sort(() => Math.random() - 0.5);

        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(opt);
            container.appendChild(btn);
        });
    }

    function checkAnswer(selected) {
        if (selected === correctAnswer) {
            score++;
            document.getElementById('message').innerText = "ì •ë‹µ! ë©‹ì ¸ìš”! ğŸ‘";
            document.getElementById('message').style.color = "#4caf50";
        } else {
            document.getElementById('message').innerText = `ì•„ì‰¬ì›Œìš”! ì •ë‹µì€ ${correctAnswer}`;
            document.getElementById('message').style.color = "#f44336";
        }

        // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™” (ì—°íƒ€ ë°©ì§€)
        const buttons = document.querySelectorAll('#options button');
        buttons.forEach(b => b.disabled = true);

        setTimeout(() => {
            if (currentQuestion < totalQuestions) {
                currentQuestion++;
                generateQuestion();
            } else {
                showResult();
            }
        }, 1500);
    }

    function showResult() {
        document.getElementById('question-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = `${totalQuestions}ë¬¸ì œ ì¤‘ ${score}ë¬¸ì œë¥¼ ë§í˜”ì–´ìš”!`;
        
        let comment = "";
        if (score === 5) comment = "ì™€! ë§Œì ì´ì—ìš”! ì‹œê³„ ë°•ì‚¬ë‹˜ì´ì‹œë„¤ìš”! ğŸ†";
        else if (score >= 3) comment = "ì™€~ ì‹œê³„ë¥¼ ì•„ì£¼ ì˜ ë³´ëŠ”êµ°ìš”! ğŸ˜Š";
        else comment = "ì¡°ê¸ˆ ë” ì—°ìŠµí•˜ë©´ ì‹œê³„ ë°•ì‚¬ê°€ ë  ìˆ˜ ìˆì–´ìš”! ğŸ’ª";
        
        document.getElementById('feedback-msg').innerText = comment;
    }

    function resetGame() {
        startGame();
    }

    startGame();
</script>

</body>
</html>